<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Light 25 학습 심리 진단</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{margin:0;background:#0f0c29;font-family:'Pretendard',-apple-system,BlinkMacSystemFont,sans-serif;-webkit-font-smoothing:antialiased;color:#fff;min-height:100vh}
button{font-family:inherit;cursor:pointer}
button:active{transform:scale(0.97)!important}
.bg{min-height:100vh;background:linear-gradient(160deg,#0f0c29 0%,#1a1a3e 30%,#24243e 60%,#1a1a2e 100%);position:relative;overflow:hidden}
.bg::before,.bg::after{content:'';position:fixed;border-radius:50%;pointer-events:none}
.bg::before{top:-20%;right:-10%;width:400px;height:400px;background:radial-gradient(circle,rgba(78,205,196,0.06) 0%,transparent 70%)}
.bg::after{bottom:-15%;left:-10%;width:350px;height:350px;background:radial-gradient(circle,rgba(167,139,250,0.06) 0%,transparent 70%)}
@keyframes fadeSlideIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.screen{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:30px 20px;opacity:0;transform:translateY(30px);transition:all .8s cubic-bezier(.4,0,.2,1)}
.screen.active{opacity:1;transform:translateY(0)}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 20px;border-radius:50px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);margin-bottom:24px;animation:fadeSlideIn .4s ease}
.scale-btn{flex:1 1 0;min-width:72px;max-width:100px;padding:20px 8px;border:none;border-radius:16px;font-size:13px;transition:all .25s ease;outline:1px solid rgba(255,255,255,0.08);white-space:pre-line;line-height:1.4;background:rgba(255,255,255,0.06);color:rgba(255,255,255,0.7);font-weight:500}
.scale-btn.selected{outline:none;font-weight:700;transform:scale(1.05)}
.result-card{background:rgba(255,255,255,0.04);border-radius:20px;padding:20px;margin-bottom:16px;border:1px solid rgba(255,255,255,0.06)}
.bar-bg{width:100%;height:6px;background:rgba(255,255,255,0.08);border-radius:3px;margin-bottom:14px}
.bar-fill{height:100%;border-radius:3px;transition:width 1s ease}
.coaching-step{display:flex;gap:10px;align-items:flex-start}
.step-num{min-width:22px;height:22px;border-radius:50%;font-size:11px;font-weight:800;display:flex;align-items:center;justify-content:center;margin-top:1px}
.pattern-box{background:rgba(255,255,255,0.06);border-radius:20px;padding:24px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.08)}
</style>
</head>
<body>
<div class="bg" id="app"></div>
<script>
const S=[
{id:"A",t:"기질",st:"유혹 / 충동",em:"⚡",c:"#FF6B6B",g:"linear-gradient(135deg,#FF6B6B,#FF8E8E)",q:["공부하려고 앉아도 금방 딴생각이 나거나 다른 행동이 하고 싶어진다.","알림(카톡/유튜브 등)이 오면 확인을 미루기 어렵다.","반복적인 과제(단어 암기/유형 반복)를 할 때 실수가 늘거나 집중이 빨리 떨어진다.","계획은 크게 세우지만, 시작하면 금방 흥미가 식는다.","즉각적인 보상(간식/게임/유튜브)이 없으면 공부가 잘 안 굴러간다."]},
{id:"B",t:"정서",st:"불안 / 완벽",em:"🌊",c:"#4ECDC4",g:"linear-gradient(135deg,#4ECDC4,#6EE7DE)",q:["완벽하게 준비되지 않으면 시작을 미루고 싶다.","문제를 풀 때 '틀리면 어떡하지?'가 떠올라 손이 멈춘다.","시험이나 평가가 가까워지면 긴장 때문에 집중이 더 어려워진다.","계획을 지나치게 꼼꼼히 세우느라 정작 실행이 늦어진다.","칭찬이나 좋은 결과가 있어도 마음이 편해지지 않고 불안이 남는다."]},
{id:"C",t:"동기",st:"무기력 / 효능감",em:"🔋",c:"#FFD93D",g:"linear-gradient(135deg,#FFD93D,#FFE566)",q:["'공부해도 달라질 게 없다'는 생각이 자주 든다.","스스로 공부를 시작하기보다, 누가 시켜야 움직이는 편이다.","성적이 올라도 성취감이 크지 않다.","막히면 '나는 원래 안 되는 편'이라고 결론내리기 쉽다.","책상에 앉아도 멍하게 시간만 보내는 날이 있다."]},
{id:"D",t:"행동",st:"회피 / 미루기",em:"🐌",c:"#A78BFA",g:"linear-gradient(135deg,#A78BFA,#C4B5FD)",q:["공부할 시간이 되면 갑자기 정리/딴청/잡일이 늘어난다.","'5분만 쉬고'가 길어져서 계획이 무너지는 일이 많다.","어려운 과목이나 단원은 계속 뒤로 미룬다.","해야 할 일을 생각하면 답답해서 폰/침대/게임으로 피하고 싶어진다.","계획표를 세워도 3일 이상 유지하기가 어렵다."]},
{id:"E",t:"전략",st:"인지 비효율",em:"🧩",c:"#F97316",g:"linear-gradient(135deg,#F97316,#FB923C)",q:["읽었는데도 핵심이 남지 않아 '뭘 봤지?'가 된다.","이해보다 암기 위주로만 하다가 금방 잊는다.","내가 무엇을 아는지/모르는지 구분이 잘 안 된다.","오답을 정리하지 않아서 비슷한 실수를 반복한다.","시험에서 시간 배분이 꼬이거나 문제를 잘못 읽는 실수가 잦다."]}
];
const SL=[{v:0,l:"전혀\n아니다"},{v:1,l:"가끔\n그렇다"},{v:2,l:"자주\n그렇다"},{v:3,l:"거의 항상\n그렇다"}];

/* ── 영역별 해석 ── */
const IP={
A:[
{lv:"양호",b:"🟢",ti:"집중력 조절이 잘 되고 있어요",d:"유혹이나 충동 앞에서도 자기 조절이 비교적 잘 되는 상태입니다. 외부 자극에 크게 흔들리지 않고 학습에 집중할 수 있는 기질적 안정성을 갖추고 있어요."},
{lv:"주의",b:"🟡",ti:"자극에 반응하기 쉬운 상태예요",d:"공부를 시작하는 데는 어느 정도 가능하지만, 중간에 자극(알림, 유튜브, SNS 등)이 들어오면 쉽게 이탈하는 패턴이 보입니다. 이것은 의지의 문제가 아니라, 뇌의 보상 시스템이 즉각적 쾌감에 더 민감하게 반응하기 때문이에요."},
{lv:"관리 필요",b:"🔴",ti:"충동 조절에 상당한 어려움이 있어요",d:"외부 유혹에 대한 저항력이 많이 약해져 있는 상태입니다. 이건 게으름이 아니라, 자극 조절 시스템이 과부하 상태라는 신호입니다. 의지력에 기대기보다 물리적 환경을 재설계하는 것이 우선이에요."}],
B:[
{lv:"양호",b:"🟢",ti:"정서적으로 안정된 학습 상태예요",d:"불안이나 완벽주의가 학습을 방해하지 않는 건강한 상태입니다. 실수를 해도 크게 위축되지 않고, 적당한 긴장감을 학습 동력으로 활용할 수 있어요."},
{lv:"주의",b:"🟡",ti:"불안이 은근히 발목을 잡고 있어요",d:"겉으로는 괜찮아 보여도, 내면에서 완벽하게 해야 해, 틀리면 안 돼라는 목소리가 학습을 방해하고 있을 수 있습니다. 완벽주의가 높은 기준이 아니라 시작을 막는 벽이 되고 있다면, 그 패턴을 인식하는 것이 첫걸음입니다."},
{lv:"관리 필요",b:"🔴",ti:"불안이 학습을 심각하게 방해하고 있어요",d:"시험 불안, 완벽주의적 미루기, 평가에 대한 과도한 두려움이 학습 전반에 영향을 미치고 있는 상태입니다. 이 수준의 불안은 인지 기능(집중, 기억, 판단)을 실질적으로 저하시킵니다."}],
C:[
{lv:"양호",b:"🟢",ti:"내면의 학습 동기가 살아있어요",d:"스스로 공부하려는 의지와 성취에 대한 기대감이 건강하게 유지되고 있습니다. 이런 내적 동기는 외부 보상보다 훨씬 지속력이 강합니다."},
{lv:"주의",b:"🟡",ti:"동기가 흔들리기 시작하는 시기예요",d:"공부의 이유가 희미해지고 있거나, 해도 안 될 것 같다는 생각이 조금씩 스며들고 있는 상태입니다. 이 상태가 지속되면 학습된 무기력으로 이어질 수 있어요."},
{lv:"관리 필요",b:"🔴",ti:"동기가 심하게 고갈된 상태예요",d:"학습에 대한 의미감과 효능감이 크게 떨어져 있습니다. 이것은 나태함이 아니라, 반복된 좌절 경험이 만들어낸 심리적 방어 기제입니다."}],
D:[
{lv:"양호",b:"🟢",ti:"행동 실행력이 좋은 상태예요",d:"계획을 세우면 실제로 행동으로 옮길 수 있는 실행력을 갖추고 있습니다. 이 실행력은 학습에서 가장 중요한 자산 중 하나입니다."},
{lv:"주의",b:"🟡",ti:"미루기 패턴이 자리잡기 시작했어요",d:"나중에 해야지가 점점 습관이 되고 있는 상태입니다. 미루기의 핵심은 시간 관리의 문제가 아니라 감정 관리의 문제입니다. 과제가 주는 불쾌한 감정을 피하기 위해 뇌가 자동으로 회피 경로를 선택하는 거예요."},
{lv:"관리 필요",b:"🔴",ti:"회피 행동이 고착화된 상태예요",d:"해야 할 일을 알면서도 시작하지 못하고, 계획을 세워도 3일을 넘기기 어려운 상태가 반복되고 있습니다. 과제의 크기, 시작의 마찰, 감정적 부담 — 이 세 가지를 줄이는 환경 설계가 필요합니다."}],
E:[
{lv:"양호",b:"🟢",ti:"학습 전략이 효율적으로 작동하고 있어요",d:"자신이 무엇을 알고 모르는지 파악하는 메타인지 능력이 잘 작동하고 있습니다. 이런 공부하는 방법을 아는 능력은 장기적으로 가장 큰 차이를 만듭니다."},
{lv:"주의",b:"🟡",ti:"학습 방법에 비효율이 있어요",d:"열심히 하고 있지만, 투입한 시간 대비 성과가 낮다고 느끼고 있을 수 있습니다. 이것은 노력의 문제가 아니라 방법의 문제일 가능성이 높아요."},
{lv:"관리 필요",b:"🔴",ti:"학습 전략 전반의 재점검이 필요해요",d:"현재 사용하고 있는 학습법이 효과적으로 작동하지 않고 있습니다. 이 상태는 머리가 나쁜 것이 아니라, 뇌의 작동 방식에 맞지 않는 방법을 쓰고 있다는 신호입니다."}]
};

/* ── 영역별 코칭 ── */
const CO={
A:[
{ti:"현재 루틴을 유지하세요",st:["지금 하고 있는 집중 방법을 기록해두세요. 나중에 컨디션이 떨어졌을 때 복구 매뉴얼이 됩니다.","새로운 자극(새 앱, 새 SNS)이 들어올 때 24시간 유예 규칙을 적용해보세요."]},
{ti:"환경 설계로 집중력을 지켜주세요",st:["포모도로 기법(25분 집중 + 5분 휴식)을 도입해보세요. 타이머가 울릴 때까지 한 가지만!","공부 시간에는 폰을 물리적으로 다른 공간에 두세요. 보이지 않으면 덜 끌린다는 원칙은 연구로 검증된 사실이에요.","집중이 깨질 때마다 '지금 뭐 하려고 했지?'를 포스트잇에 적어두세요. 이탈 패턴을 인식하는 것만으로도 큰 변화가 시작돼요."]},
{ti:"물리적 환경부터 완전히 바꾸세요",st:["스마트폰 잠금 앱(Forest, 집중모드)을 설치하고, 공부 시간에는 폰을 아예 가방에 넣으세요.","하루 학습 목표를 딱 1가지로 줄이세요. 여러 개를 계획하면 뇌가 압도당해 아무것도 못 시작해요.","보상 체계를 만드세요: 25분 집중 완료 시 작은 보상. 뇌에게 집중하면 좋은 일이 생긴다를 학습시키는 거예요.","같은 장소에서만 공부하는 장소 조건화를 시도하세요. 특정 공간 = 공부라는 연결이 뇌에 만들어지면 앉는 것만으로도 모드 전환이 됩니다."]}],
B:[
{ti:"건강한 긴장감을 유지하세요",st:["시험 전 적당한 긴장은 오히려 집중력을 높여줍니다. 이 상태를 자연스럽게 받아들이세요.","간혹 부담이 느껴질 때를 대비해, 3분 호흡법(들숨 4초 - 멈춤 4초 - 날숨 4초)을 연습해두면 좋아요."]},
{ti:"완벽하지 않아도 시작하기 훈련",st:["5분 규칙을 적용하세요: 완벽한 준비 없이 일단 5분만 시작하기. 대부분 계속하게 됩니다.","계획을 세울 때 80% 완성도를 목표로 설정해보세요.","최악의 경우 뭐가 일어나지?를 구체적으로 적어보는 탈파국화 연습을 해보세요."]},
{ti:"불안 관리를 위한 체계적 접근이 필요해요",st:["4-7-8 호흡법을 매일 연습하세요: 코로 4초 들이쉬고, 7초 멈추고, 입으로 8초 내쉬기.","걱정 시간을 정해두세요: 하루 중 15분만 걱정을 허용하고, 그 외 시간에는 미뤄두세요.","인지적 재구조화를 연습해보세요: 틀리면 끝이야를 틀리면 모르는 걸 발견하는 거야로.","불안이 일상생활까지 영향을 미치고 있다면, 전문 상담(CBT 기반)을 적극 고려해주세요."]}],
C:[
{ti:"내적 동기를 더 강화하세요",st:["지금 공부하는 이유를 한 문장으로 적어 눈에 보이는 곳에 붙여두세요.","주 1회 성장 일지를 작성해보세요: 이번 주에 새로 알게 된 것, 해낸 것을 기록하세요."]},
{ti:"작은 성공 경험을 의도적으로 쌓으세요",st:["Done List를 만드세요: 오늘 실제로 한 것을 적는 리스트입니다.","목표를 지금 당장 할 수 있는 크기로 쪼개세요.","성장 마인드셋 언어를 연습하세요: '나는 못해'를 '나는 아직 못해(yet)'로."]},
{ti:"무기력의 구조를 이해하고 회복 경로를 만드세요",st:["지금 상태는 게으름이 아니라 학습된 무기력일 수 있어요. 이걸 인식하는 것 자체가 회복의 시작입니다.","하루 목표를 극단적으로 낮추세요: 교과서 1페이지만 읽기, 문제 1개만 풀기.","1일 1완료 체크를 30일간 이어보세요.","신뢰할 수 있는 사람에게 현재 상태를 솔직히 말해보세요."]}],
D:[
{ti:"실행력을 더 다듬어보세요",st:["지금의 실행 습관을 시스템으로 만들어두세요.","주간 리뷰(일요일 10분)를 추가해보세요."]},
{ti:"미루기의 감정적 원인을 다뤄보세요",st:["2분 규칙을 적용하세요: 하기 싫어도 딱 2분만 시작합니다.","미루고 싶을 때 '지금 나는 어떤 감정을 피하려는 걸까?'를 자문해보세요.","어려운 과목은 하루 중 에너지가 가장 높은 시간에 배치하세요."]},
{ti:"회피 구조를 해체하고 시작 마찰을 줄이세요",st:["과제를 10분 안에 끝낼 수 있는 크기로 분해하세요.","시작 의식(Startup Ritual)을 만드세요.","계획표를 3일 단위로 세우세요.","피하고 싶은 과제 TOP 1을 매일 가장 먼저 하세요(Eat the Frog).","진행 상황을 눈에 보이게 기록하세요(달력에 X표, 스티커 등)."]}],
E:[
{ti:"학습 전략을 더 정교하게 다듬으세요",st:["현재 효과적인 학습법을 목록으로 정리해두세요.","주 1회 메타인지 점검을 해보세요."]},
{ti:"수동적 학습에서 능동적 학습으로 전환하세요",st:["읽기, 덮기, 떠올리기(인출 연습)를 기본으로 하세요.","주 1회 오답 복습 시간을 고정하세요.","핵심 개념을 남에게 설명하듯 말해보세요(파인만 기법)."]},
{ti:"학습법 자체를 과학적으로 재설계하세요",st:["코넬 노트법을 도입하세요.","간격 반복(Spaced Repetition)을 적용하세요: 1일, 3일, 7일, 14일 간격으로 복습.","인출 연습을 일상화하세요: 수업 후 3분간 '오늘 뭘 배웠지?' 떠올리기.","시험 전 시간 배분 연습을 하세요: 실제 시험 시간의 90%만 사용하는 연습.","자신의 학습 패턴을 1주일간 기록해보세요."]}]
};

function gi(id,sc){return IP[id][sc<=5?0:sc<=10?1:2]}
function gc(id,sc){return CO[id][sc<=5?0:sc<=10?1:2]}

/* ── 패턴 자동 분류 ── */
function detectPattern(scores){
  const vals=S.map(s=>({id:s.id,t:s.t,em:s.em,sc:scores[s.id]}));
  const sorted=[...vals].sort((a,b)=>b.sc-a.sc);
  const hi=sorted[0], hi2=sorted[1], lo=sorted[4];
  const total=vals.reduce((a,v)=>a+v.sc,0);
  const highCount=vals.filter(v=>v.sc>=11).length;
  const midCount=vals.filter(v=>v.sc>=6&&v.sc<=10).length;
  const allMid=vals.every(v=>v.sc>=5&&v.sc<=10);
  const spread=hi.sc-lo.sc;

  // 안정적 (총점 0~25)
  if(total<=25){
    return{
      em:"✨",name:"잘 달리는 자전거",sub:"안정적 학습 패턴",
      desc:"지금 당신의 학습 심리는 잘 정비된 자전거와 같아요. 페달(동기)도 잘 굴러가고, 핸들(전략)도 안정적이며, 브레이크(정서 조절)도 잘 작동하고 있습니다.\n\n5개 영역 모두 큰 어려움 없이 관리되고 있어요. 현재 방식을 유지하되, 상대적으로 점수가 높은 "+hi.em+" "+hi.t+" 영역("+hi.sc+"점)에 약간의 관심을 기울이면 더 완성도 높은 학습이 가능합니다.\n\n🔑 "+lo.em+" "+lo.t+" 영역("+lo.sc+"점)은 큰 강점이니, 이 영역의 습관을 다른 영역에도 확장해보세요.",
      hi:hi,lo:lo
    };
  }

  // 적극관리 (총점 51+)
  if(total>50){
    return{
      em:"🆘",name:"안개 속 항해",sub:"적극적 관리가 필요한 상태",
      desc:"지금은 짙은 안개 속에서 방향을 찾기 어려운 상태와 같아요. 여러 영역에서 동시에 어려움을 경험하고 있어서, 어디서부터 손을 대야 할지 막막하게 느껴질 수 있습니다.\n\n이것은 능력의 문제가 아니라, 심리적·환경적 요인이 복합적으로 작용하고 있다는 신호예요. 안개 속에서 혼자 길을 찾으려 하기보다, 나침반 역할을 해줄 학습 코치나 상담 전문가의 도움을 받는 것을 강하게 권합니다.\n\n🔑 지금 가장 시급한 영역은 "+hi.em+" "+hi.t+"("+hi.sc+"점)이에요. 전문가와 함께 이 영역부터 하나씩 풀어나가면, 생각보다 빠르게 안개가 걷힐 수 있어요.",
      hi:hi,lo:lo
    };
  }

  // 중간 범위(26~50): 패턴 분류
  // 1) 동기+행동 동시 위험 → 마음의 겨울
  if(scores.C>=11&&scores.D>=11){
    return{
      em:"🧊",name:"마음의 겨울",sub:"무기력 고착 패턴",
      desc:"집중력도 있고, 불안하지도 않고, 공부법도 알고 있어요. 그런데 시작이 안 되죠. 마치 모든 도구가 준비되어 있는데, 몸이 얼어붙은 것처럼.\n\n이건 게으름이 아니에요. 심리학에서는 이것을 '학습된 무기력'이라고 불러요. 반복해서 노력했는데 결과가 안 따라온 경험이 쌓이면, 뇌가 스스로를 보호하기 위해 '어차피 안 돼'라는 결론을 미리 내려버리는 거예요. 매번 문을 밀어도 안 열리면, 어느 순간 문 앞에 가는 것 자체를 포기하게 되는 것처럼요.\n\n지금 상태에서 가장 위험한 것은, 이 무기력을 의지력의 문제로 착각하고 자신을 탓하는 거예요.\n\n🔑 큰 목표는 잠시 내려놓으세요. 교과서 1페이지 읽기, 문제 1개 풀기 — 말도 안 될 정도로 작은 목표를 매일 하나씩 완료하세요. 뇌는 아무리 작은 것이라도 '해냈다'는 경험이 쌓이면, 얼어붙었던 동기 회로가 다시 작동하기 시작합니다. 2주 이상 지속되고 있다면 전문가 상담을 권합니다.",
      hi:hi,lo:lo
    };
  }

  // 2) 기질+정서 동시 위험 → 이중 악순환
  if(scores.A>=11&&scores.B>=11){
    return{
      em:"🌀",name:"불안이 충동을 부르는 시소",sub:"이중 악순환 패턴",
      desc:"지금 두 가지가 동시에 일어나고 있어요. 한쪽에서는 불안이 '완벽하게 해야 해'라고 압박하고, 다른 쪽에서는 그 압박이 너무 크니까 뇌가 '그냥 유튜브나 보자'며 도망치려 해요.\n\n이 둘은 따로 노는 것 같지만, 실은 시소처럼 연결되어 있어요: 불안이 커지면 → 불쾌함을 피하려고 충동적으로 딴 행동을 하고 → 공부를 못 했다는 죄책감이 → 다시 불안을 키우는 거예요.\n\n좋은 소식은, "+lo.em+" "+lo.t+"("+lo.sc+"점)이 건강하다는 거예요.\n\n🔑 핵심은 순서예요. 먼저 불안을 낮추세요 — 4-7-8 호흡법이나 '최악의 경우를 구체적으로 적어보기'가 효과적이에요. 불안이 한 단계만 내려가도, 충동적 회피가 눈에 띄게 줄어듭니다.",
      hi:hi,lo:lo
    };
  }

  // 3) 정서+전략 동시 위험 → 공회전하는 엔진
  if(scores.B>=11&&scores.E>=11){
    return{
      em:"🎯",name:"공회전하는 엔진",sub:"완벽주의 과부하 패턴",
      desc:"열심히 하고 있어요. 행동력도 있고, 동기도 살아있어요. 그런데 투입한 시간에 비해 결과가 안 나오죠? 마치 엔진은 세게 돌아가는데 바퀴가 헛도는 느낌.\n\n원인은 불안이에요. 불안이 높으면, 뇌의 작업 공간(심리학에서는 '작업 기억'이라고 불러요)이 걱정에 의해 점령당합니다. 컴퓨터에 백그라운드 프로그램이 너무 많이 돌아가면 정작 필요한 작업이 느려지는 것과 같아요.\n\n또 완벽주의가 학습 전략을 비효율적으로 만들고 있을 수 있어요. '확실히 알 때까지' 같은 내용을 반복하거나, 노트를 지나치게 꼼꼼히 만드는 패턴이 여기에 해당합니다.\n\n🔑 전략을 바꾸려 하기 전에, 불안부터 낮추세요. 불안이라는 백그라운드 프로그램을 닫으면, 같은 전략이라도 효율이 확 달라집니다. 엔진은 이미 충분히 좋아요 — 기어만 제대로 물리면 됩니다.",
      hi:hi,lo:lo
    };
  }

  // 4) 한 영역만 11+ → 자극 과민 / 특정 영역 집중
  if(highCount===1){
    const danger=vals.find(v=>v.sc>=11);
    const metaphors={A:{n:"리모컨을 빼앗긴 뇌",s:"자극 과민 패턴"},B:{n:"보이지 않는 브레이크",s:"불안 우세 패턴"},C:{n:"시동이 꺼진 엔진",s:"동기 고갈 패턴"},D:{n:"출발선의 벽",s:"회피 고착 패턴"},E:{n:"지도 없는 여행",s:"전략 부재 패턴"}};
    const m=metaphors[danger.id];
    const descs={
      A:"지금 당신의 뇌는 '자극 자판기' 앞에 서 있는 상태예요. 유튜브, 알림, SNS처럼 즉각적으로 기분이 좋아지는 것들에 뇌의 보상 회로가 과하게 반응하고 있어서, 공부처럼 '나중에 보상이 오는 일'을 선택하는 데 훨씬 많은 에너지가 듭니다.\n\n이건 의지가 약한 게 아니에요. 마치 다이어트 중에 눈앞의 케이크를 거절하는 것과 같아요 — 의지의 문제가 아니라, 케이크가 눈앞에 있는 환경의 문제죠.\n\n🔑 의지력으로 버티려 하지 말고, 유혹 자체를 물리적으로 차단하세요. 환경이 바뀌면 뇌의 선택도 바뀝니다.",
      B:"겉으로는 괜찮아 보이지만, 마음속에서 보이지 않는 브레이크가 계속 밟히고 있어요. '틀리면 어쩌지', '완벽하지 않으면 시작하지 말자'는 생각이 무의식적으로 학습을 멈추게 하고 있습니다.\n\n불안이 높으면 뇌의 작업 공간이 걱정에 점령당해요. 실력은 있는데 시험만 보면 실수가 느는 것도 이 때문이에요.\n\n🔑 불안은 '없애는 것'이 아니라 '조절하는 것'이에요. 호흡법으로 신체 반응을 먼저 낮추고, '최악의 경우'를 구체적으로 적어보면 막연한 불안이 관리 가능한 크기로 줄어듭니다.",
      C:"공부해야 한다는 건 아는데, 몸이 움직이지 않아요. 마치 자동차 시동이 꺼진 것처럼, 엑셀을 밟아도 반응이 없는 느낌.\n\n이건 '하기 싫은 것'과는 달라요. 반복된 좌절이 뇌에 '해도 안 돼'라는 학습을 시켜버린 거예요.\n\n🔑 큰 목표 대신 '완료 경험'에 집중하세요. 문제 1개, 1페이지 — 아무리 작아도 '해냈다'는 경험이 시동을 다시 걸어줍니다.",
      D:"해야 할 일이 있다는 건 알아요. 계획도 세울 수 있어요. 그런데 출발선에 서면 보이지 않는 벽이 느껴져요. 그래서 '일단 정리부터', '5분만 쉬고' 하다가 하루가 지나가죠.\n\n미루기는 시간 관리의 문제가 아니라, 감정 관리의 문제예요. 과제가 주는 불쾌한 감정(지루함, 답답함, 두려움)을 피하기 위해 뇌가 자동으로 우회 경로를 찾는 거예요.\n\n🔑 시작의 허들을 극단적으로 낮추세요. '영어 공부하기'가 아니라 '영어 단어 5개 읽기'. 시작만 하면 관성이 생깁니다.",
      E:"열심히 공부하고 있는데, 마치 지도 없이 여행하는 것처럼 효율이 안 나오고 있어요. 읽어도 남지 않고, 외워도 금방 잊어버리죠.\n\n이건 머리가 나빠서가 아니에요. 뇌가 정보를 저장하고 꺼내는 방식에 맞지 않는 방법을 쓰고 있다는 뜻이에요.\n\n🔑 가장 효과적인 한 가지: '읽기 → 덮기 → 떠올리기'. 이 인출 연습만 습관화해도 기억 정착률이 2~3배 높아집니다."
    };
    return{
      em:danger.em,name:m.n,sub:m.s,
      desc:descs[danger.id]+"\n\n다른 영역은 비교적 안정적이어서, "+danger.em+" "+danger.t+" 영역에 집중하면 전체 학습 효율이 크게 개선될 수 있어요.",
      hi:hi,lo:lo
    };
  }

  // 5) 골고루 분산 (모두 주의 수준 or 차이 적음)
  if(allMid||spread<=5){
    return{
      em:"🔋",name:"배터리 잔량 20%",sub:"전반적 에너지 소진 패턴",
      desc:"특별히 고장 난 부분은 없는데, 모든 게 조금씩 힘든 느낌이죠? 이건 스마트폰 배터리가 20%일 때와 비슷해요. 카메라도 되고 전화도 되지만, 모든 게 느리고 버벅거리는 상태.\n\n심리학에서는 이것을 '자원 소진의 나선'이라고 불러요. 심리적 에너지가 여러 곳에서 조금씩 새고 있어서, 어느 하나를 제대로 회복할 여력이 안 되는 상태입니다.\n\n중요한 건, 이 패턴은 공부 방법이나 습관의 문제가 아니라 기본 컨디션의 문제인 경우가 많아요.\n\n🔑 공부법을 바꾸려 하기 전에, 일단 배터리부터 충전하세요. 수면 시간 확보, 가벼운 운동, 누군가와의 대화 — 이 세 가지가 모든 영역의 회복 속도를 높여줍니다.",
      hi:hi,lo:lo
    };
  }

  // 6) 기본 두 영역 이상 위험 fallback
  const dangerAreas=vals.filter(v=>v.sc>=11);
  const dNames=dangerAreas.map(v=>v.em+" "+v.t).join("과 ");
  return{
    em:"⚠️",name:"여러 곳에서 새는 지붕",sub:"복합 부담 패턴",
    desc:"지금은 지붕 여러 곳에서 비가 새고 있는 상태와 비슷해요. "+dNames+" 영역이 동시에 관리 필요 수준이어서, 하나를 고치는 사이 다른 곳에서 문제가 생기는 느낌일 수 있습니다.\n\n여러 영역이 동시에 높을 때는 서로가 서로를 악화시키는 경우가 많아요. 그래서 '가장 영향력이 큰 한 곳'을 먼저 고치는 것이 전략적입니다.\n\n🔑 가장 먼저 다뤄야 할 영역은 "+hi.em+" "+hi.t+"("+hi.sc+"점)이에요. 이 영역이 개선되면 다른 영역도 연쇄적으로 나아지는 경우가 많습니다. "+lo.em+" "+lo.t+"("+lo.sc+"점)은 잘 유지되고 있으니 이 강점을 지렛대로 활용하세요.",
    hi:hi,lo:lo
  };
}

let phase="intro",ans={},cSec=0,cQ=0;
const app=document.getElementById("app");

function render(){
  if(phase==="intro") renderIntro();
  else if(phase==="test") renderTest();
  else renderResult();
}

function renderIntro(){
  app.innerHTML=`<div class="screen" id="scr" style="text-align:center">
    <div style="font-size:64px;margin-bottom:20px">🧠</div>
    <h1 style="font-size:32px;font-weight:800;letter-spacing:-0.5px">Light 25</h1>
    <p style="font-size:18px;color:rgba(255,255,255,0.7);margin-top:8px;font-weight:500">학습 심리 진단</p>
    <div style="width:60px;height:3px;background:linear-gradient(90deg,#FF6B6B,#4ECDC4);border-radius:2px;margin:24px auto"></div>
    <p style="font-size:14px;color:rgba(255,255,255,0.5);max-width:320px;line-height:1.7">최근 2주간의 나를 돌아보며<br>25개 문항에 솔직하게 답해주세요.</p>
    <p style="font-size:13px;color:rgba(255,255,255,0.35);margin-top:8px">소요 시간: 약 3~5분</p>
    <button onclick="phase='test';render()" style="margin-top:40px;padding:16px 48px;font-size:16px;font-weight:700;color:#1a1a2e;background:#fff;border:none;border-radius:50px;box-shadow:0 4px 24px rgba(255,255,255,0.2)">시작하기</button>
    <div style="display:flex;gap:8px;margin-top:30px;justify-content:center">${S.map(s=>`<div style="width:8px;height:8px;border-radius:50%;background:${s.c};opacity:0.6"></div>`).join("")}</div>
  </div>`;
  setTimeout(()=>document.getElementById("scr").classList.add("active"),50);
}

function renderTest(){
  const s=S[cSec],gq=cSec*5+cQ,tot=Object.keys(ans).length,pct=(tot/25*100);
  app.innerHTML=`<div class="screen active" style="justify-content:flex-start;padding-top:30px">
    <div style="width:100%;max-width:400px;margin:0 auto">
      <div style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;color:rgba(255,255,255,0.6)"><span>${tot}/25</span><span>${Math.round(pct)}%</span></div>
      <div style="width:100%;height:6px;background:rgba(255,255,255,0.1);border-radius:3px;overflow:hidden"><div style="width:${pct}%;height:100%;background:linear-gradient(90deg,#FF6B6B,#4ECDC4,#FFD93D,#A78BFA,#F97316);border-radius:3px;transition:width .5s"></div></div>
    </div>
    <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:500px;margin:0 auto;width:100%">
      <div class="pill"><span style="font-size:18px">${s.em}</span><span style="font-size:13px;font-weight:600;color:${s.c}">${s.id}. ${s.t}</span><span style="font-size:12px;color:rgba(255,255,255,0.4)">${s.st}</span></div>
      <div style="font-size:14px;color:rgba(255,255,255,0.35);margin-bottom:12px;font-weight:600">Q${gq+1}</div>
      <p style="font-size:18px;font-weight:600;text-align:center;line-height:1.7;margin:0 0 40px 0;max-width:440px;animation:fadeSlideIn .5s ease">${s.q[cQ]}</p>
      <div style="display:flex;gap:12px;width:100%;justify-content:center;flex-wrap:wrap">
        ${SL.map(sl=>{
          const sel=ans[gq]===sl.v;
          return `<button class="scale-btn${sel?' selected':''}" style="${sel?'background:'+s.g+';color:#1a1a2e;box-shadow:0 4px 20px '+s.c+'44':''}" onclick="pickAnswer(${gq},${sl.v})"><div style="font-size:22px;font-weight:800;margin-bottom:6px">${sl.v}</div>${sl.l}</button>`;
        }).join("")}
      </div>
    </div>
  </div>`;
}

function pickAnswer(qi,v){
  ans[qi]=v;
  setTimeout(()=>{
    if(cQ<4)cQ++;
    else if(cSec<4){cSec++;cQ=0;}
    else phase="result";
    render();
  },350);
}

function renderResult(){
  const scores={};
  S.forEach((s,si)=>{let sum=0;for(let i=0;i<5;i++)sum+=(ans[si*5+i]||0);scores[s.id]=sum;});
  const total=Object.values(scores).reduce((a,b)=>a+b,0);
  const pat=detectPattern(scores);

  // 역산 레이더: 15-점수 = 건강도 (높을수록 건강)
  const sz=280,cn=sz/2,mr=sz/2-40,stp=2*Math.PI/5,sa=-Math.PI/2;
  const pt=(i,v)=>({x:cn+(v/15)*mr*Math.cos(sa+i*stp),y:cn+(v/15)*mr*Math.sin(sa+i*stp)});
  const healthScores=S.map(s=>15-scores[s.id]);
  const pts=healthScores.map((v,i)=>pt(i,v));
  let svg=`<svg width="${sz}" height="${sz}" viewBox="0 0 ${sz} ${sz}" style="filter:drop-shadow(0 4px 20px rgba(0,0,0,0.1))">`;
  [0.25,0.5,0.75,1].forEach(lv=>{let p=Array.from({length:5},(_,i)=>{const a=sa+i*stp;return(cn+mr*lv*Math.cos(a))+","+(cn+mr*lv*Math.sin(a));}).join(" ");svg+=`<polygon points="${p}" fill="none" stroke="rgba(255,255,255,0.15)" stroke-width="1"/>`;});
  S.forEach((s,i)=>{const a=sa+i*stp;svg+=`<line x1="${cn}" y1="${cn}" x2="${cn+mr*Math.cos(a)}" y2="${cn+mr*Math.sin(a)}" stroke="rgba(255,255,255,0.1)" stroke-width="1"/><text x="${cn+(mr+24)*Math.cos(a)}" y="${cn+(mr+24)*Math.sin(a)}" text-anchor="middle" dominant-baseline="middle" fill="white" font-size="13" font-weight="600">${s.em} ${s.t}</text>`;});
  // 건강한 영역 = 그라데이션 면적
  svg+=`<defs><linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4ECDC4" stop-opacity="0.3"/><stop offset="100%" stop-color="#A78BFA" stop-opacity="0.3"/></linearGradient></defs>`;
  svg+=`<polygon points="${pts.map(p=>p.x+","+p.y).join(" ")}" fill="url(#rg)" stroke="rgba(78,205,196,0.8)" stroke-width="2.5"/>`;
  pts.forEach((p,i)=>{svg+=`<circle cx="${p.x}" cy="${p.y}" r="5" fill="white" stroke="${S[i].c}" stroke-width="2.5"/>`;});
  svg+=`</svg>`;

  const descHtml=pat.desc.split('\n\n').map(p=>`<p style="margin-bottom:12px">${p}</p>`).join('');

  let cards=S.map(s=>{
    const sc=scores[s.id],ip=gi(s.id,sc),co=gc(s.id,sc),pct=((15-sc)/15*100);
    const icon=ip.lv==="양호"?"✅":ip.lv==="주의"?"⚠️":"🚨";
    return `<div class="result-card">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
        <div style="display:flex;align-items:center;gap:10px"><span style="font-size:22px">${s.em}</span><div><div style="font-size:15px;font-weight:700">${s.id}. ${s.t}</div><div style="font-size:12px;color:rgba(255,255,255,0.4)">${s.st}</div></div></div>
        <div style="text-align:right"><span style="font-size:12px;margin-right:4px">${ip.b}</span><span style="font-size:13px;font-weight:600;color:${s.c}">${sc}/15</span></div>
      </div>
      <div class="bar-bg"><div class="bar-fill" style="width:${pct}%;background:${s.g}"></div></div>
      <div style="font-size:14px;font-weight:700;color:${s.c};margin-bottom:8px;display:flex;align-items:center;gap:6px">${icon} ${ip.ti}</div>
      <div style="font-size:13px;color:rgba(255,255,255,0.65);line-height:1.85;padding:14px 16px;background:rgba(255,255,255,0.03);border-radius:12px;margin-bottom:12px">${ip.d}</div>
      <div style="padding:16px;background:linear-gradient(135deg,${s.c}08,${s.c}04);border-radius:14px;border:1px solid ${s.c}18">
        <div style="font-size:13px;font-weight:700;color:${s.c};margin-bottom:10px;display:flex;align-items:center;gap:6px">💡 ${co.ti}</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          ${co.st.map((step,idx)=>`<div class="coaching-step"><div class="step-num" style="background:${s.c}20;color:${s.c}">${idx+1}</div><p style="font-size:12.5px;color:rgba(255,255,255,0.6);line-height:1.8;margin:0">${step}</p></div>`).join("")}
        </div>
      </div>
    </div>`;
  }).join("");

  app.innerHTML=`<div class="screen" id="scr" style="justify-content:flex-start;padding-top:30px;align-items:stretch">
    <div style="max-width:500px;margin:0 auto;width:100%">
      <div style="text-align:center;margin-bottom:30px">
        <div style="font-size:48px;margin-bottom:12px">${pat.em}</div>
        <h2 style="font-size:22px;font-weight:800;margin:0;color:rgba(255,255,255,0.9)">"${pat.name}"</h2>
        <p style="font-size:15px;color:rgba(255,255,255,0.5);margin-top:6px;font-weight:500">${pat.sub}</p>
        <p style="font-size:13px;color:rgba(255,255,255,0.35);margin-top:4px">총점: ${total} / 75</p>
      </div>

      <div style="display:flex;justify-content:center;margin-bottom:8px;background:rgba(255,255,255,0.04);border-radius:24px;padding:20px;border:1px solid rgba(255,255,255,0.06)">
        ${svg}
      </div>
      <p style="text-align:center;font-size:11px;color:rgba(255,255,255,0.3);margin-bottom:20px">※ 면적이 넓을수록 건강한 학습 상태입니다</p>

      <div class="pattern-box">
        <div style="font-size:13px;font-weight:700;color:rgba(255,255,255,0.5);margin-bottom:12px">📋 나의 학습 심리 분석</div>
        <div style="font-size:14px;color:rgba(255,255,255,0.75);line-height:1.9">${descHtml}</div>
      </div>

      <div style="display:flex;gap:10px;margin-bottom:24px">
        <div style="flex:1;background:rgba(78,205,196,0.08);border-radius:14px;padding:14px;border:1px solid rgba(78,205,196,0.15)">
          <div style="font-size:11px;font-weight:700;color:#4ECDC4;margin-bottom:6px">💪 가장 안정적인 영역</div>
          <div style="font-size:15px;font-weight:700">${pat.lo.em} ${pat.lo.t}</div>
          <div style="font-size:12px;color:rgba(255,255,255,0.4);margin-top:2px">${pat.lo.sc}점 / 15점</div>
        </div>
        <div style="flex:1;background:rgba(255,107,107,0.08);border-radius:14px;padding:14px;border:1px solid rgba(255,107,107,0.15)">
          <div style="font-size:11px;font-weight:700;color:#FF6B6B;margin-bottom:6px">🎯 우선 개선 영역</div>
          <div style="font-size:15px;font-weight:700">${pat.hi.em} ${pat.hi.t}</div>
          <div style="font-size:12px;color:rgba(255,255,255,0.4);margin-top:2px">${pat.hi.sc}점 / 15점</div>
        </div>
      </div>

      ${cards}

      <div style="text-align:center;padding:30px 0 40px">
        <button onclick="ans={};cSec=0;cQ=0;phase='intro';render()" style="padding:14px 40px;font-size:15px;font-weight:700;color:#fff;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.15);border-radius:50px">다시 검사하기</button>
        <p style="font-size:11px;color:rgba(255,255,255,0.25);margin-top:16px">&copy; 2026 Light 25 학습 심리 진단 &middot; Counseling &amp; Coaching Center</p>
      </div>
    </div>
  </div>`;
  setTimeout(()=>document.getElementById("scr").classList.add("active"),50);
}

render();
</script>
</body>
</html>
