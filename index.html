<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Study Fitness Mini Â· ê³µë¶€ì²´ë ¥ Mini</title>

  <!-- ê¸°ë³¸ ë©”íƒ€ -->
  <meta name="description" content="ê³µë¶€ëŠ” í•˜ëŠ”ë° ì™œ ì„±ê³¼ê°€ ì•ˆ ë‚ ê¹Œ? 3ë¶„ ë¬´ë£Œë¡œ ë‚˜ì˜ í•™ìŠµ ì‹¬ë¦¬ ì‹¤í–‰ êµ¬ì¡°ë¥¼ ì ê²€í•´ë³´ì„¸ìš”.">
  <meta name="keywords" content="ê³µë¶€, í•™ìŠµì‹¬ë¦¬, ì§‘ì¤‘ë ¥, ë¯¸ë£¨ê¸°, ë¶ˆì•ˆ, ê³µë¶€ë²•, ë¬´ë£Œê²€ì‚¬">
  <!-- Open Graph (ì¹´ì¹´ì˜¤, í˜ì´ìŠ¤ë¶ ë“±) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Light 25 | 3ë¶„ ë¬´ë£Œ í•™ìŠµ ì‹¬ë¦¬ ì ê²€">
  <meta property="og:description" content="ê³µë¶€ëŠ” í•˜ëŠ”ë° ì™œ ì•ˆ ë ê¹Œ? ì˜ì§€ ë¬¸ì œê°€ ì•„ë‹ˆë¼ êµ¬ì¡° ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 3ë¶„ ë¬´ë£Œ ì ê²€.">
  <meta property="og:url" content="https://josephpsh74-couch.github.io/light25/">
  <meta property="og:image" content="https://josephpsh74-couch.github.io/light25/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <!-- Twitter(X) ì „ìš© -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ê³µë¶€ëŠ” í•˜ëŠ”ë°, ì™œ ì•ˆ ë ê¹Œ?">
  <meta name="twitter:description" content="3ë¶„ ë¬´ë£Œë¡œ ë‚˜ì˜ í•™ìŠµ ì‹¬ë¦¬ ì‹¤í–‰ êµ¬ì¡° ì ê²€í•˜ê¸°. ì§‘ì¤‘Â·ë¶ˆì•ˆÂ·ë¯¸ë£¨ê¸°Â·ì „ëµ ì§„ë‹¨.">
  <meta name="twitter:image" content="https://josephpsh74-couch.github.io/light25/og-image.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Pretendard',-apple-system,BlinkMacSystemFont,sans-serif;
      color:#fff;
      min-height:100vh;
      background:
        radial-gradient(900px 600px at 15% 20%, rgba(167,139,250,.28), transparent 55%),
        radial-gradient(800px 500px at 85% 10%, rgba(78,205,196,.22), transparent 55%),
        radial-gradient(900px 700px at 60% 85%, rgba(255,107,107,.18), transparent 60%),
        linear-gradient(160deg,#0b1024 0%, #0f0c29 35%, #141a3a 100%);
    }
    a{color:inherit}
    button{font-family:inherit;cursor:pointer}
    button:active{transform:scale(.99)}
    .bg{
      min-height:100vh;
      padding:56px 22px;
      display:flex;
      justify-content:center;
      align-items:flex-start;
    }
    .wrap{width:100%;max-width:1020px;margin:0 auto}
    .card{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      border-radius:26px;
      padding:32px;
      box-shadow:
        0 30px 80px rgba(0,0,0,.45),
        inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);
    }
    .muted{color:rgba(255,255,255,.72)}
    .tiny{color:rgba(255,255,255,.42);font-size:12px;line-height:1.65}
    .h1{font-size:40px;font-weight:950;letter-spacing:-1px;line-height:1.15}
    .h2{font-size:18px;font-weight:900;letter-spacing:-.2px}
    .sp8{height:8px}.sp12{height:12px}.sp16{height:16px}.sp20{height:20px}.sp28{height:28px}

    .pill{
      display:inline-flex;gap:10px;align-items:center;
      padding:10px 14px;border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.07);
    }

    .cta{
      width:100%;
      border:none;
      border-radius:999px;
      padding:16px 20px;
      font-weight:950;
      font-size:16px;
      color:#0f0c29;
      background: linear-gradient(90deg, rgba(255,255,255,1), rgba(255,255,255,.92));
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .cta:hover{transform: translateY(-2px);box-shadow: 0 18px 56px rgba(0,0,0,.42);filter: brightness(1.02);}
    .cta2{
      width:100%;
      border:1px solid rgba(255,255,255,.18);
      border-radius:999px;
      padding:14px 18px;
      font-weight:900;
      font-size:14px;
      background:rgba(255,255,255,.07);
      color:#fff;
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
    }
    .cta2:hover{transform: translateY(-2px);background: rgba(255,255,255,.10);border-color: rgba(255,255,255,.24);}

    .iconbtn{
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      border-radius:999px;
      padding:10px 12px;
      font-weight:950;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      white-space:nowrap;
    }
    .iconbtn:hover{transform: translateY(-2px);background: rgba(255,255,255,.10);border-color: rgba(255,255,255,.24);}

    .row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .scale{
      flex:1 1 140px;
      min-width:140px;
      border:none;
      border-radius:18px;
      padding:16px 12px;
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      border:1px solid rgba(255,255,255,.12);
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .scale:hover{transform: translateY(-3px);background: rgba(255,255,255,.11);border-color: rgba(255,255,255,.20);}
    .scale strong{display:block;font-size:20px;font-weight:950}
    .scale small{display:block;margin-top:8px;color:rgba(255,255,255,.58);white-space:pre-line;line-height:1.25}
    .scale.selected{
      background: rgba(255,255,255,.16);
      border-color: rgba(255,255,255,.30);
      box-shadow: 0 10px 26px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.10);
      transform: translateY(-2px);
    }

    .bar{height:8px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden}
    .fill{height:100%;width:0%;background: linear-gradient(90deg,#FF6B6B,#FFD93D,#4ECDC4,#A78BFA,#F97316);transition: width .38s ease;}
    .q{font-size:22px;font-weight:950;letter-spacing:-.4px;line-height:1.55;text-align:center;}

    .grid2{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:840px){.grid2{grid-template-columns:1fr 1fr}}

    .tag{font-size:12px;font-weight:950;padding:7px 10px;border-radius:999px;display:inline-flex;gap:6px;align-items:center;letter-spacing:-.2px;}
    .tag.ok{background:rgba(78,205,196,.14);border:1px solid rgba(78,205,196,.28);color:#4ECDC4}
    .tag.mid{background:rgba(255,217,61,.14);border:1px solid rgba(255,217,61,.28);color:#FFD93D}
    .tag.bad{background:rgba(255,107,107,.14);border:1px solid rgba(255,107,107,.28);color:#FF6B6B}

    .box{padding:14px 14px;border-radius:16px;background:rgba(255,255,255,.045);border:1px solid rgba(255,255,255,.10);line-height:1.75;color:rgba(255,255,255,.80);box-shadow: inset 0 1px 0 rgba(255,255,255,.06);}

    .sticky{
      position:sticky;
      bottom:0;left:0;right:0;
      padding:14px 0 6px;
      background: linear-gradient(180deg, transparent, rgba(11,16,36,.85) 30%, rgba(11,16,36,1));
      border-radius: 0 0 22px 22px;
      margin-top: 6px;
    }

    .headerRow{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    .headerLeft{display:flex;align-items:center;gap:10px;flex-wrap:wrap}

    .toggle{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .switch{
      width:46px;height:28px;border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.22);
      position:relative;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }
    .knob{
      position:absolute;top:3px;left:3px;
      width:22px;height:22px;border-radius:50%;
      background:rgba(255,255,255,.95);
      transition: transform .18s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,.35);
    }
    .switch.on{background:rgba(78,205,196,.22);border-color:rgba(78,205,196,.35)}
    .switch.on .knob{transform:translateX(18px)}

    @media(min-width:840px){.h1{font-size:44px}.card{padding:34px}}
  
/* ===== Mini 5min Mission (2 cards) ===== */
.missionWrap{
  padding:16px;
  border-radius:14px;
  background:rgba(17,24,38,.92);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 18px 50px rgba(0,0,0,.35);
}
.missionTitle{
  font-size:18px;
  font-weight:800;
  color:#b9ffd6;
  margin-bottom:10px;
  letter-spacing:-0.2px;
}
.missionSub{
  font-size:13px;
  font-weight:600;
  color:rgba(255,255,255,.65);
  margin-left:6px;
}
.missionGrid{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
}
@media (min-width: 900px){
  .missionGrid{ grid-template-columns:1fr 1fr; }
}
.missionCard{
  width:100%;
  text-align:left;
  border-radius:12px;
  padding:14px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  color:#eaf0ff;
  cursor:pointer;
  transition:transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
}
.missionCard:hover{
  transform:translateY(-1px);
  background:rgba(255,255,255,.08);
  border-color:rgba(185,255,214,.35);
  box-shadow:0 10px 24px rgba(0,0,0,.28);
}
.missionCard.selected{
  background:rgba(34,197,94,.12);
  border-color:rgba(34,197,94,.55);
  box-shadow:0 12px 28px rgba(34,197,94,.12), 0 10px 22px rgba(0,0,0,.28);
}
.missionHead{
  font-size:15px;
  font-weight:900;
  color:#d7ffe8;
  margin-bottom:6px;
}
.missionText{
  font-size:14px;
  font-weight:650;
  color:rgba(255,255,255,.86);
  line-height:1.55;
}
.missionHint{
  margin-top:10px;
  font-size:12.5px;
  color:rgba(255,255,255,.62);
}

</style>
</head>
<body>
  <div class="bg">
    <div class="wrap" id="app"></div>
  </div>

<script>
  const FULL_TEST_URL = "./light25_premium_v5.html";
  const STORAGE_KEY = "LIGHT_MINI_RESULT";

  const SCALE = [
    {v:0, t:"ì „í˜€\ ì•„ë‹ˆë‹¤"},
    {v:1, t:"ê°€ë”\ ê·¸ë ‡ë‹¤"},
    {v:2, t:"ìì£¼\ ê·¸ë ‡ë‹¤"},
    {v:3, t:"ê±°ì˜ í•­ìƒ\ ê·¸ë ‡ë‹¤"},
  ];


// ===== i18n =====
var lang = "ko";

const EN_MINI = {
  brand: "Study Fitness Mini",
  sub: "Â· 3-min Study Check",
  headline: "You study hard,<br/>but why no results?",
  desc: "Based on the last 2 weeks Â· 10 questions<br/>Quick check: focus, anxiety, motivation, procrastination, strategy.",
  disclaimer: "â€» For educational self-check purposes only; does not replace clinical diagnosis.",
  startBtn: "Start Free",
  fullBtn: "Full Assessment (25 items) â†’",
  parentToggle: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent Summary Mode",
  parentDesc: "Shows results in parent-friendly language.",
  miniNote: 'Mini only shows the "direction"',
  miniNoteDesc: 'The more mixed (2+ high areas), the more important a detailed analysis becomes.<br/>The full assessment provides <b>Top2 mixed analysis</b> + <b>14-day action plan</b> + <b>parent guide</b>.',
  sections: {A:"Impulse",B:"Anxiety",C:"Drive",D:"Avoidance",E:"Strategy"},
  questions: {
    A:["Even after starting to study, I want to do something else within 10â€“15 minutes.",
       "If my phone is nearby, I lose focus easily."],
    B:["If I'm not perfectly prepared, it's hard to start.",
       "Just thinking about a test or evaluation makes me nervous."],
    C:["Studying doesn't seem like it will change much.",
       "I move only when someone tells me to, rather than starting on my own."],
    D:["When it's time to study, I suddenly find other things to do.",
       "'Just 5 more minutes of rest' keeps stretching out."],
    E:["I find it hard to explain what I learned in my own words.",
       "When I get something wrong, I just check the answer instead of figuring out why."]
  },
  scale: ["Not\nat all","Rarely","Often","Almost\nalways"],
  back: "â† Back",
  tip: 'Tip: Choose the closest answer based on the "last 2 weeks."',
  resultTitle: "Mini Result",
  resultSub: "Â· Trend Signal",
  mixedH1: "âš  Mixed signals detected",
  singleH1: "âœ… One key area stands out",
  mixedDesc: function(t1,t2){ return "Currently <b>"+t1+"</b> + <b>"+t2+"</b> may be working together as a pattern."; },
  singleDesc: function(t1){ return "Currently <b>"+t1+"</b> appears to be the priority improvement area."; },
  strengthTitle: "ğŸ’ª Strength Area",
  strengthText: function(name,sc){ return "<b>"+name+"</b> is relatively stable ("+sc+"/6). Keep this strength and use systems to lift the rest."; },
  parentNote: "ğŸ“Œ For parents: If 2+ areas show 'caution/high risk,' a full assessment is recommended.",
  miniOnlyDir: "<b>Mini only shows the direction.</b><br/>The full assessment provides <b>Top2 mixed analysis</b> + <b>14-day action plan</b> + <b>parent guide</b>.",
  goFull: "See my execution structure in detail (5â€“7 min)",
  editAnswers: "Edit Answers",
  retake: "Try Again",
  fullNote: "â€» The full assessment has more items for more accurate structural analysis.",
  missionTitle: "ğŸ¯ Today's 5-min Mission",
  missionSub: "Â· Pick one of two",
  missionPick: "Pick one and try it right now",
  missionHint: "âœ” Even 5 minutes can change your execution flow.",
  levels: {bad:"High Risk", mid:"Caution", ok:"Stable"},
  pts: "pts",
  shortExplain: {
    A: {
      highP: "Stimulus response (phone/notifications) is strong, making focus fragile. Environment design (phone placement/notifications) comes before 'willpower.'",
      highS: "Your brain gets pulled by stimuli (phone/notifications) easily. Environment design comes first.",
      lowP: "Stimuli can sometimes distract, but environmental adjustments alone can improve things quickly.",
      lowS: "You get pulled by stimuli sometimes, but with management you'll improve fast."
    },
    B: {
      highP: "Tension/perfectionism standards are blocking the start. Reducing worry will likely boost actual performance.",
      highS: "Tension/perfectionism is blocking your start. Lower the anxiety first, and action opens up.",
      lowP: "Anxiety may slightly interfere, but routines (small starts/time limits) can stabilize things.",
      lowS: "A little anxiety creeps in, but routines can fully stabilize it."
    },
    C: {
      highP: "Sense of meaning/efficacy in learning has dropped. Rebuilding with 'small completion experiences' is the best approach.",
      highS: "Your sense of meaning/efficacy is off. Restart with small completion experiences.",
      lowP: "Motivation may be wavering. Breaking goals smaller and stacking completions brings recovery.",
      lowS: "Motivation is starting to waver. Break goals smaller and it'll recover."
    },
    D: {
      highP: "Avoidance/procrastination is becoming habitual. Reducing 'starting friction' (2-min start/fixed routine) is key.",
      highS: "Avoidance is becoming a habit. Friction reduction like '2-min start' is the key.",
      lowP: "There are signs of increasing procrastination. Fixing a start routine can greatly reduce it.",
      lowS: "Procrastination is growing. Fix a start routine and it drops significantly."
    },
    E: {
      highP: "Learning autonomy has dropped. Training in 'rephrasing/question-making' is needed.",
      highS: "Your ability to think independently has weakened. Start with 'rephrasing in your own words.'",
      lowP: "There are inefficiency signals in study methods. Start with 'explaining what you learned in your own words.'",
      lowS: "There are inefficiency signals in your methods. Start with 'explaining what you learned in your own words.'"
    }
  },
  todayMissions: {
    A: {p:"ğŸ“Œ Put the phone in another room and try just two 15-min timer sessions.", s:"ğŸ“Œ Phone away + two 15-min timer sessions."},
    B: {p:"ğŸ“Œ After 90-sec breathing (4-4-4), start just 10 min with a 'roughly 70%' standard.", s:"ğŸ“Œ 90-sec breathing then 10 min with a '70% only' standard."},
    C: {p:"ğŸ“Œ Complete 1 'impossible to fail' goal (1 problem/3 words).", s:"ğŸ“Œ Complete 1 impossible-to-fail goal (1 problem)."},
    D: {p:"ğŸ“Œ Start with 'just 2 minutes,' set a timer, then decide whether to continue.", s:"ğŸ“Œ 'Just 2 min' start. Then decide to continue."},
    E: {p:"ğŸ“Œ Explain 1 thing you learned today in your own words without the textbook.", s:"ğŸ“Œ Explain 1 thing in your own words (2 sentences)."},
    def: {p:"ğŸ“Œ Today, focus on just 'starting' for 10 minutes.", s:"ğŸ“Œ Today, just 10 min of 'starting.'"}
  },
  missions: {
    "Impulse": {title:"âš¡ Impulse Â· 5-min Focus Start", text:"Put your phone in another room and set a 5-min timer. Focus on finishing just one problem."},
    "Avoidance": {title:"ğŸŒ Avoidance Â· Remove Starting Friction", text:"Mark 3 problems to solve in the first 5 min. During the timer, stick only to those problems."},
    "Anxiety": {title:"ğŸŒŠ Anxiety Â· Lower the Bar & Complete", text:"Pick the easiest problem. For 5 minutes, aim for 'finished' not 'perfect.'"},
    "Strategy": {title:"ğŸ§© Strategy Â· Rephrase It", text:"Pick one thing you learned today, close the textbook, and explain it in 2 sentences. Where you get stuck is your real weak point."},
    "Drive": {title:"ğŸ”¥ Drive Â· Ignite Achievement", text:"Pick the shortest unit and write down '3 things I know' in 5 minutes."},
    "default": {title:"âœ… Default Â· 5-min Start", text:"Set a 5-min timer and finish 1 easy problem from start to end."},
    "supplement": {title:"âœ… Supplement Â· 5-min Maintain", text:"Set a 5-min timer and explain what you just studied in 2 sentences to yourself."}
  }
};

function toggleLang(){
  lang = (lang==="ko")?"en":"ko";
  render();
}

function langToggleHTML(){
  var label = lang==="ko" ? "English" : "í•œêµ­ì–´";
  return '<button onclick="toggleLang()" style="position:fixed;top:12px;right:12px;z-index:999;padding:6px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.08);font-size:12px;font-weight:700;color:rgba(255,255,255,.8);cursor:pointer;backdrop-filter:blur(8px);box-shadow:0 2px 8px rgba(0,0,0,.2)">' + label + '</button>';
}

function secTitle(id){
  return lang==="en" ? EN_MINI.sections[id] : SECTIONS.find(s=>s.id===id).title;
}
function getQ_mini(secIdx, qIdx){
  if(lang==="en"){
    var sid = SECTIONS[secIdx].id;
    return EN_MINI.questions[sid][qIdx];
  }
  return SECTIONS[secIdx].qs[qIdx];
}
function getScale_mini(idx){
  return lang==="en" ? EN_MINI.scale[idx] : SCALE[idx].t;
}
function M(key, fallback){
  return (lang==="en" && EN_MINI[key]) ? EN_MINI[key] : fallback;
}
// ===== end i18n =====


  const SECTIONS = [
    {id:"A", em:"âš¡", title:"ì¶©ë™", qs:[
      "ê³µë¶€ë¥¼ ì‹œì‘í•´ë„ 10~15ë¶„ ì•ˆì— ë‹¤ë¥¸ ê±¸ í•˜ê³  ì‹¶ì–´ì§„ë‹¤.",
      "í°ì´ ê·¼ì²˜ì— ìˆìœ¼ë©´ ì§‘ì¤‘ì´ ì‰½ê²Œ ê¹¨ì§„ë‹¤."
    ]},
    {id:"B", em:"ğŸŒŠ", title:"ë¶ˆì•ˆ", qs:[
      "ì™„ë²½íˆ ì¤€ë¹„ë˜ì§€ ì•Šìœ¼ë©´ ì‹œì‘ì´ ì–´ë µë‹¤.",
      "ì‹œí—˜ì´ë‚˜ í‰ê°€ ìƒê°ë§Œ í•´ë„ ê¸´ì¥ëœë‹¤."
    ]},
    {id:"C", em:"ğŸ”‹", title:"ë™ê¸°", qs:[
      "ê³µë¶€í•´ë„ í¬ê²Œ ë‹¬ë¼ì§ˆ ê²ƒ ê°™ì§€ ì•Šë‹¤.",
      "ìŠ¤ìŠ¤ë¡œ ì‹œì‘í•˜ê¸°ë³´ë‹¤ ëˆ„ê°€ ì‹œì¼œì•¼ ì›€ì§ì¸ë‹¤."
    ]},
    {id:"D", em:"ğŸŒ", title:"íšŒí”¼", qs:[
      "í•´ì•¼ í•  ì‹œê°„ì´ ë˜ë©´ ë”´ í–‰ë™ì´ ëŠ˜ì–´ë‚œë‹¤.",
      "â€œ5ë¶„ë§Œ ì‰¬ìâ€ê°€ ê¸¸ì–´ì§€ëŠ” ì¼ì´ ë§ë‹¤."
    ]},
    {id:"E", em:"ğŸ§©", title:"ì „ëµ", qs:[
      "ë°°ìš´ ë‚´ìš©ì„ ë‚´ ë§ë¡œ ë°”ê¿” ì„¤ëª…í•˜ê¸° ì–´ë µë‹¤.",
      "í‹€ë¦° ë¬¸ì œì˜ ì›ì¸ì„ ìŠ¤ìŠ¤ë¡œ ë¶„ì„í•˜ê¸°ë³´ë‹¤ ë‹µë§Œ í™•ì¸í•œë‹¤."
    ]},
  ];

  const app = document.getElementById("app");

  let phase = "intro"; // intro | test | result
  let idx = 0;         // 0..9
  let answers = {};    // {0:0..3,...}
  let parentMode = false;

  function totalAnswered(){ return Object.keys(answers).length; }
  function pct(){
    // "ì§„í–‰ë¥ "ì€ í˜„ì¬ ë¬¸í•­ ê¸°ì¤€ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê²Œ ì§ê´€ì ì´ë¼ idx ê¸°ë°˜ìœ¼ë¡œ í‘œì‹œ
    return Math.round((idx/10)*100);
  }

  function levelFromScore(sc){
    if(sc >= 5) return {k:lang==="en"?"High Risk":"ê³ ìœ„í—˜", cls:"bad"};
    if(sc >= 3) return {k:lang==="en"?"Caution":"ì£¼ì˜", cls:"mid"};
    return {k:lang==="en"?"Stable":"ì•ˆì •", cls:"ok"};
  }

  function computeScores(){
    const scores = {};
    SECTIONS.forEach((s, si)=>{
      const a0 = answers[si*2] ?? 0;
      const a1 = answers[si*2+1] ?? 0;
      scores[s.id] = a0 + a1; // 0..6
    });
    return scores;
  }

  function goBack(){
    if(phase==="test"){
      if(idx>0){
        idx--;
        render();
      } else {
        phase="intro";
        render();
      }
      return;
    }
    if(phase==="result"){
      phase="test";
      idx = 9;
      render();
    }
  }

  function restart(){
    phase="intro";
    idx=0;
    answers={};
    parentMode=false;
    render();
  }

  function goFull(){
    const payload = { ts: Date.now(), answers, scores: computeScores(), parentMode };
    try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(payload)); }catch(e){}
    window.location.href = FULL_TEST_URL;
  }

  function pick(v){
    // í˜„ì¬ ë¬¸í•­ ê°’ ë®ì–´ì“°ê¸°(ìˆ˜ì •)
    answers[idx]=v;

    // ë‹¤ìŒ ë¬¸í•­ìœ¼ë¡œ ì´ë™(ë§ˆì§€ë§‰ì´ë©´ ê²°ê³¼)
    setTimeout(()=>{
      if(idx<9){ idx++; render(); }
      else { phase="result"; render(); }
    }, 140);
  }

  function shortExplain(id, sc){
    if(lang==="en"){
      const e = EN_MINI.shortExplain[id];
      if(!e) return "";
      const isP = parentMode;
      if(sc>=5) return isP ? e.highP : e.highS;
      return isP ? e.lowP : e.lowS;
    }
    const isParent = parentMode;
    if(id==="A"){
      if(sc>=5) return isParent
        ? "ìê·¹(í°/ì•Œë¦¼) ë°˜ì‘ì´ ì»¤ì„œ ì§‘ì¤‘ì´ ëŠê¸°ê¸° ì‰¬ìš´ ì‹ í˜¸ì…ë‹ˆë‹¤. â€˜ì˜ì§€â€™ë³´ë‹¤ í™˜ê²½(í° ìœ„ì¹˜/ì•Œë¦¼)ì´ ë¨¼ì €ì…ë‹ˆë‹¤."
        : "ìê·¹(í°/ì•Œë¦¼)ì— ë‡Œê°€ ì‰½ê²Œ ëŒë ¤ê°€ìš”. ì˜ì§€ë³´ë‹¤ í™˜ê²½ ì„¤ê³„ê°€ ë¨¼ì €ì˜ˆìš”.";
      return isParent
        ? "ìê·¹ì— í”ë“¤ë¦´ ë•Œê°€ ìˆì§€ë§Œ, í™˜ê²½ ì¡°ì •ë§Œìœ¼ë¡œë„ ë¹ ë¥´ê²Œ ê°œì„ ë  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
        : "ê°€ë” ìê·¹ì— ëŒë¦¬ì§€ë§Œ, ê´€ë¦¬í•˜ë©´ ê¸ˆë°© ì¢‹ì•„ì§ˆ íƒ€ì…ì´ì—ìš”.";
    }
    if(id==="B"){
      if(sc>=5) return isParent
        ? "ê¸´ì¥/ì™„ë²½ ê¸°ì¤€ì´ ì‹œì‘ì„ ë§‰ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤. ê±±ì •ì´ ì¤„ë©´ ì‹¤ì œ ìˆ˜í–‰ì´ ì˜¬ë¼ê°ˆ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
        : "ê¸´ì¥/ì™„ë²½ ê¸°ì¤€ì´ ì‹œì‘ì„ ë§‰ëŠ” ì‹ í˜¸ì˜ˆìš”. ë¶ˆì•ˆë¶€í„° ë‚®ì¶”ë©´ ì‹¤í–‰ì´ ì—´ë ¤ìš”.";
      return isParent
        ? "ë¶ˆì•ˆì´ ì‚´ì§ ê°œì…í•  ìˆ˜ ìˆìœ¼ë‚˜, ë£¨í‹´(ì‘ì€ ì‹œì‘/ì‹œê°„ ì œí•œ)ìœ¼ë¡œ ì•ˆì •í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤."
        : "ë¶ˆì•ˆì´ ì‚´ì§ ë¼ì§€ë§Œ, ë£¨í‹´ìœ¼ë¡œ ì¶©ë¶„íˆ ì•ˆì •í™” ê°€ëŠ¥í•©ë‹ˆë‹¤.";
    }
    if(id==="C"){
      if(sc>=5) return isParent
        ? "í•™ìŠµ ì˜ë¯¸ê°/íš¨ëŠ¥ê°ì´ ë‚®ì•„ì§„ ì‹ í˜¸ì…ë‹ˆë‹¤. â€˜ì‘ì€ ì™„ë£Œ ê²½í—˜â€™ë¶€í„° ë‹¤ì‹œ ìŒ“ëŠ” ì ‘ê·¼ì´ ì¢‹ìŠµë‹ˆë‹¤."
        : "ì˜ë¯¸/íš¨ëŠ¥ê°ì´ êº¼ì ¸ ìˆì–´ìš”. ì‘ì€ ì™„ë£Œ ê²½í—˜ë¶€í„° ë‹¤ì‹œ ì‹œë™ ê±¸ì–´ì•¼ í•´ìš”.";
      return isParent
        ? "ë™ê¸°ê°€ í”ë“¤ë¦¬ëŠ” ë‹¨ê³„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª©í‘œë¥¼ ì‘ê²Œ ìª¼ê°œê³  ì™„ë£Œë¥¼ ìŒ“ìœ¼ë©´ íšŒë³µë©ë‹ˆë‹¤."
        : "ë™ê¸°ê°€ í”ë“¤ë¦¬ê¸° ì‹œì‘í•œ ë‹¨ê³„ì˜ˆìš”. ëª©í‘œë¥¼ ì‘ê²Œ ìª¼ê°œë©´ íšŒë³µë¼ìš”.";
    }
    if(id==="D"){
      if(sc>=5) return isParent
        ? "íšŒí”¼/ë¯¸ë£¨ê¸°ê°€ ìŠµê´€í™”ë˜ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤. â€˜ì‹œì‘ ë§ˆì°°â€™ì„ ì¤„ì´ëŠ” ì„¤ê³„(2ë¶„ ì‹œì‘/ë£¨í‹´ ê³ ì •)ê°€ í•µì‹¬ì…ë‹ˆë‹¤."
        : "íšŒí”¼ê°€ ìŠµê´€í™”ëœ ì‹ í˜¸ì˜ˆìš”. â€˜2ë¶„ ì‹œì‘â€™ ê°™ì€ ë§ˆì°° ê°ì†Œê°€ í•µì‹¬ì´ì—ìš”.";
      return isParent
        ? "ë¯¸ë£¨ê¸°ê°€ ëŠ˜ì–´ë‚˜ëŠ” ì‹ í˜¸ê°€ ìˆìŠµë‹ˆë‹¤. ì‹œì‘ ë£¨í‹´ì„ ê³ ì •í•˜ë©´ ì¤„ì–´ë“¤ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
        : "ë¯¸ë£¨ê¸°ê°€ ëŠ˜ì–´ë‚˜ëŠ” ì¤‘ì´ì—ìš”. ì‹œì‘ ë£¨í‹´ì„ ê³ ì •í•˜ë©´ í™• ì¤„ì–´ë“¤ì–´ìš”.";
    }
    if(id==="E"){
      if(sc>=5) return isParent
        ? "í•™ìŠµ ììœ¨ì„±ì´ ë‚®ì•„ì§„ ì‹ í˜¸ì…ë‹ˆë‹¤. 'ë‚´ ë§ë¡œ ë°”ê¾¸ê¸°/ì§ˆë¬¸ ë§Œë“¤ê¸°' í›ˆë ¨ì´ í•„ìš”í•©ë‹ˆë‹¤."
        : "ìŠ¤ìŠ¤ë¡œ ìƒê°í•˜ëŠ” í˜ì´ ì•½í•´ì§„ ì‹ í˜¸ì˜ˆìš”. 'ë‚´ ë§ë¡œ ë°”ê¾¸ê¸°'ë¶€í„° ì‹œì‘í•´ë´ìš”.";
      return isParent
        ? "í•™ìŠµ ë°©ë²•ì— ë¹„íš¨ìœ¨ ì‹ í˜¸ê°€ ìˆìŠµë‹ˆë‹¤. 'ë°°ìš´ ê±¸ ë‚´ ë§ë¡œ ì„¤ëª…í•˜ê¸°'ë¶€í„° ì¶”ì²œí•©ë‹ˆë‹¤."
        : "ë°©ë²•ì˜ ë¹„íš¨ìœ¨ ì‹ í˜¸ê°€ ìˆì–´ìš”. 'ë°°ìš´ ê±¸ ë‚´ ë§ë¡œ ì„¤ëª…í•˜ê¸°'ë¶€í„° ì¶”ì²œí•´ìš”.";
    }
    return "";
  }

  function todayMission(topId){
    if(lang==="en"){
      const m = EN_MINI.todayMissions[topId] || EN_MINI.todayMissions.def;
      return parentMode ? m.p : m.s;
    }
    const isParent = parentMode;
    const missions = {
      A: isParent ? "ğŸ“Œ í°ì„ ë‹¤ë¥¸ ë°©ì— ë‘ê³  15ë¶„ íƒ€ì´ë¨¸ 2íšŒë§Œ ì§„í–‰í•´ë³´ì„¸ìš”." : "ğŸ“Œ í° ë‹¤ë¥¸ ë°© + 15ë¶„ íƒ€ì´ë¨¸ 2íšŒë§Œ í•´ë³´ì.",
      B: isParent ? "ğŸ“Œ ì‹œì‘ ì „ 90ì´ˆ í˜¸í¡(4-4-4) í›„, â€˜ëŒ€ì¶© 70ì â€™ ê¸°ì¤€ìœ¼ë¡œ 10ë¶„ë§Œ ì‹œì‘í•´ë³´ì„¸ìš”." : "ğŸ“Œ 90ì´ˆ í˜¸í¡ í›„ â€˜70ì ë§Œâ€™ ê¸°ì¤€ìœ¼ë¡œ 10ë¶„ ì‹œì‘.",
      C: isParent ? "ğŸ“Œ â€˜ì‹¤íŒ¨í•  ìˆ˜ ì—†ëŠ” ëª©í‘œâ€™ 1ê°œ(ë¬¸ì œ 1ê°œ/ë‹¨ì–´ 3ê°œ)ë¥¼ ì™„ë£Œí•´ë³´ì„¸ìš”." : "ğŸ“Œ ì‹¤íŒ¨ ë¶ˆê°€ ëª©í‘œ 1ê°œë§Œ ì™„ë£Œ(ë¬¸ì œ 1ê°œ).",
      D: isParent ? "ğŸ“Œ â€˜2ë¶„ë§Œâ€™ ì‹œì‘í•´ì„œ íƒ€ì´ë¨¸ë¥¼ ì¼œê³ , ëë‚˜ë©´ ê³„ì†í• ì§€ ê²°ì •í•˜ì„¸ìš”." : "ğŸ“Œ â€˜2ë¶„ë§Œâ€™ ì‹œì‘. ëë‚˜ë©´ ê³„ì†í• ì§€ ê²°ì •.",
      E: isParent ? "ğŸ“Œ ì˜¤ëŠ˜ ë³¸ ë‚´ìš© 3ê°€ì§€ë¥¼ â€˜ë®ê³  ë§í•˜ê¸°â€™ë¡œ ì¸ì¶œí•´ë³´ì„¸ìš”." : "ğŸ“Œ ë®ê³  í•µì‹¬ 3ê°œ ë§í•˜ê¸°(ì¸ì¶œ).",
    };
    return missions[topId] || (isParent ? "ğŸ“Œ ì˜¤ëŠ˜ì€ 10ë¶„ë§Œ â€˜ì‹œì‘â€™ì— ì§‘ì¤‘í•´ë³´ì„¸ìš”." : "ğŸ“Œ ì˜¤ëŠ˜ì€ 10ë¶„ë§Œ â€˜ì‹œì‘â€™.");
  }

  function render(){
    if(phase==="intro") return renderIntro();
    if(phase==="test") return renderTest();
    return renderResult();
  }

  function renderIntro(){
    app.innerHTML = langToggleHTML() + `
      <div class="card">
        <div class="pill"><span>ğŸ§ </span><span class="h2">${M("brand","ê³µë¶€ì²´ë ¥ Mini")}</span><span class="tiny">${M("sub","Â· 3ë¶„ í•™ìŠµ ì ê²€")}</span></div>
        <div class="sp16"></div>
        <div class="h1">${M("headline","ê³µë¶€ëŠ” í•˜ëŠ”ë°,<br/>ì™œ ì„±ê³¼ê°€ ì•ˆ ë‚ ê¹Œ?")}</div>
        <div class="sp12"></div>
        <div class="muted" style="line-height:1.7">
          ${M("desc","ìµœê·¼ 2ì£¼ ê¸°ì¤€ Â· 10ë¬¸í•­ìœ¼ë¡œ<br/>ì§‘ì¤‘/ë¶ˆì•ˆ/ë™ê¸°/ë¯¸ë£¨ê¸°/ì „ëµì„ ë¹ ë¥´ê²Œ ì ê²€í•´ìš”.")}
        </div>
        <div class="sp16"></div>
        <div class="tiny">${M("disclaimer","â€» êµìœ¡ì  ìê¸°ì ê²€ ëª©ì ì´ë©° ì„ìƒì  ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")}</div>
        <div class="sp20"></div>
        <button class="cta" onclick="phase='test';render()">${M("startBtn","ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°")}</button>
        <div class="sp12"></div>
        <button class="cta2" onclick="try{localStorage.removeItem(STORAGE_KEY)}catch(e){};window.location.href=FULL_TEST_URL">${M("fullBtn","ë³¸ê²€ì‚¬(25ë¬¸í•­) ë°”ë¡œ ë³´ê¸°")}</button>
      </div>

      <div class="sp16"></div>

      <div class="card">
        <div class="toggle">
          <div>
            <div class="h2">${M("parentToggle","ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨ ìš”ì•½ ëª¨ë“œ")}</div>
            <div class="tiny">${M("parentDesc","ë¶€ëª¨ì—ê²Œ ë„ì›€ì´ ë˜ëŠ” í‘œí˜„ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.")}</div>
          </div>
          <div class="switch ${parentMode?'on':''}" onclick="parentMode=!parentMode;renderIntro()">
            <div class="knob"></div>
          </div>
        </div>
      </div>

      <div class="sp16"></div>

      <div class="card">
        <div class="h2">MiniëŠ” â€œë°©í–¥â€ë§Œ ì•Œë ¤ì¤˜ìš”</div>
        <div class="sp12"></div>
        <div class="tiny">
          ${M("miniNoteDesc","í˜¼í•©í˜•(2ê°œ ì´ìƒ ë†’ìŒ)ì¼ìˆ˜ë¡ ì •ë°€ ë¶„ì„ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.<br/>ì •ë°€ ì§„ë‹¨ì—ì„œëŠ” <b>Top2 í˜¼í•© ë¶„ì„</b> + <b>14ì¼ ì‹¤í–‰ í”Œëœ</b> + <b>ë¶€ëª¨ ê°€ì´ë“œ</b>ë¥¼ ì œê³µí•©ë‹ˆë‹¤.")}
        </div>
      </div>
    `;
}

  function renderTest(){
    const section = SECTIONS[Math.floor(idx/2)];
    const question = section.qs[idx%2];
    const progress = pct();
    const selected = answers[idx];

    app.innerHTML = langToggleHTML() + `
      <div class="card">
        <div class="headerRow">
          <div class="headerLeft">
            <button class="iconbtn" onclick="goBack()" aria-label="ë’¤ë¡œê°€ê¸°">${lang==="en"?"â† Back":"â† ë’¤ë¡œ"}</button>
            <div class="pill"><span>${section.em}</span><span class="h2">${secTitle(section.id)}</span><span class="tiny">${idx+1}/10</span></div>
          </div>
          <div class="tiny">${progress}%</div>
        </div>
        <div class="sp12"></div>
        <div class="bar"><div class="fill" style="width:${progress}%"></div></div>

        <div class="sp28"></div>
        <div class="q">${getQ_mini(Math.floor(idx/2), idx%2)}</div>
        <div class="sp28"></div>

        <div class="row">
          ${SCALE.map(sc=>`
            <button class="scale ${selected===sc.v?'selected':''}" onclick="pick(${sc.v})">
              <strong>${sc.v}</strong>
              <small>${getScale_mini(sc.v)}</small>
            </button>
          `).join("")}
        </div>

        <div class="sp16"></div>
        <div class="tiny">íŒ: â€œìµœê·¼ 2ì£¼â€ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ê°€ê¹Œìš´ ë‹µì„ ì„ íƒí•˜ì„¸ìš”.</div>
      </div>
    `;
  }

  function renderResult(){
    const scores = computeScores();
    const arr = SECTIONS.map(s=>({id:s.id, em:s.em, title:s.title, sc:scores[s.id]}));
    const sorted = [...arr].sort((a,b)=>b.sc-a.sc);
    const top1 = sorted[0], top2 = sorted[1];
    const strength = [...arr].sort((a,b)=>a.sc-b.sc)[0];

    const highOrMid = arr.filter(x=>x.sc>=3).length;
    const mixed = highOrMid>=2;

    function cardHTML(x){
      const lv = levelFromScore(x.sc);
      return `
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:10px">
            <div>
              <div class="h2">${x.em} ${secTitle(x.id)}</div>
              <div class="tiny">${x.sc}/6${lang==="en"?" pts":"ì "}</div>
            </div>
            <div class="tag ${lv.cls}">â— ${lv.k}</div>
          </div>
          <div class="sp12"></div>
          <div class="box">${shortExplain(x.id, x.sc)}</div>
        </div>
      `;
    }

    const mission = todayMission(top1.id);

    app.innerHTML = langToggleHTML() + `
      <div class="card">
        <div class="pill"><span>âœ…</span><span class="h2">${M("resultTitle","Mini ê²°ê³¼")}</span><span class="tiny">${M("resultSub","Â· ê²½í–¥ ì‹ í˜¸")}</span></div>
        <div class="sp16"></div>

        <div class="h1">${mixed ? M("mixedH1","âš  í˜¼í•© ì‹ í˜¸ê°€ ë³´ì—¬ìš”") : M("singleH1","âœ… í•œ ì˜ì—­ì´ í•µì‹¬ì´ì—ìš”")}</div>
        <div class="sp12"></div>
        <div class="muted" style="line-height:1.7">
          ${mixed
            ? lang==="en"?EN_MINI.mixedDesc(top1.em+" "+secTitle(top1.id), top2.em+" "+secTitle(top2.id)):`í˜„ì¬ëŠ” <b>${top1.em} ${secTitle(top1.id)}</b> + <b>${top2.em} ${secTitle(top2.id)}</b>ê°€ í•¨ê»˜ ì‘ë™í•˜ëŠ” íŒ¨í„´ì¼ ê°€ëŠ¥ì„±ì´ ìˆì–´ìš”.`
            : lang==="en"?EN_MINI.singleDesc(top1.em+" "+secTitle(top1.id)):`í˜„ì¬ëŠ” <b>${top1.em} ${secTitle(top1.id)}</b>ê°€ ìš°ì„  ê°œì„  í¬ì¸íŠ¸ë¡œ ë³´ì—¬ìš”.`
          }
        </div>

        <div class="sp16"></div>
        <div class="grid2">
          ${cardHTML(top1)}
          ${cardHTML(top2)}
        </div>

        <div class="sp16"></div>
        <div class="card" style="background:rgba(78,205,196,.06);border-color:rgba(78,205,196,.18)">
          <div class="h2">${M("strengthTitle","ğŸ’ª ê°•ì  ì˜ì—­")}</div>
          <div class="sp12"></div>
          <div class="box">
            ${lang==="en"?EN_MINI.strengthText(strength.em+" "+secTitle(strength.id), strength.sc):"<b>"+strength.em+" "+secTitle(strength.id)+"</b> ì˜ì—­ì€ ë¹„êµì  ì•ˆì •ì ì´ì—ìš”( "+strength.sc+"/6 )."}
            ${lang==="en"?"":""}${lang==="ko"?(parentMode ? "ê°•ì ì€ ìœ ì§€í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ì‹œìŠ¤í…œ(í™˜ê²½/ë£¨í‹´)ìœ¼ë¡œ ëŒì–´ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤." : "ê°•ì ì€ ìœ ì§€í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ì‹œìŠ¤í…œìœ¼ë¡œ ëŒì–´ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤."):""}
          </div>
          <div class="sp12"></div>
          <div class="tiny">${lang==="en"?"ğŸ“Œ For parents: If 2+ areas show caution/high risk, a full assessment is recommended.":"ğŸ“Œ í•™ë¶€ëª¨ ì°¸ê³ : 2ê°œ ì´ìƒ 'ì£¼ì˜/ê³ ìœ„í—˜'ì´ë©´ ì •ë°€ ì§„ë‹¨ì„ ê¶Œì¥í•©ë‹ˆë‹¤."}</div>
        </div>

        <div class="sp16"></div>
        <div id="missionBox"></div>

        <div class="sp16"></div>
        <div class="box">
          ${M("miniOnlyDir","<b>MiniëŠ” ë°©í–¥ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.</b><br/>ì •ë°€ ì§„ë‹¨ì—ì„œëŠ” <b>Top2 í˜¼í•© ë¶„ì„</b> + <b>14ì¼ ì‹¤í–‰ í”Œëœ</b> + <b>ë¶€ëª¨ ê°€ì´ë“œ</b>ë¥¼ ì œê³µí•©ë‹ˆë‹¤.")}
        </div>

        <div class="sticky">
          <button class="cta" onclick="goFull()">${M("goFull","ë‚´ ì‹¤í–‰ êµ¬ì¡° ë” ìì„¸íˆ ë³´ê¸° (5~7ë¶„)")}</button>
          <div class="sp12"></div>
          <button class="cta2" onclick="goBack()">${M("editAnswers","ë‹µë³€ ìˆ˜ì •í•˜ê¸°")}</button>
          <div class="sp12"></div>
          <button class="cta2" onclick="restart()">${M("retake","ë‹¤ì‹œ í•´ë³´ê¸°")}</button>
          <div class="sp12"></div>
          <div class="tiny">${M("fullNote","â€» ì •ë°€ ì§„ë‹¨ì€ ë” ì •í™•í•œ êµ¬ì¡° ë¶„ì„ì„ ìœ„í•´ ë¬¸í•­ ìˆ˜ê°€ ëŠ˜ì–´ë‚©ë‹ˆë‹¤.")}</div>
        </div>
      </div>
    `;

    try{ renderMissions(top1.id, top2.id); }catch(e){ console.error(e); }
  }

  render();

// ===== 5ë¶„ ë¯¸ì…˜(2ê°œ ì¤‘ ì„ íƒ) : Top1/Top2 ê¸°ë°˜ =====
function missionFor(id){
  if(lang==="en"){
    const enMap = {A:"Impulse",B:"Anxiety",C:"Drive",D:"Avoidance",E:"Strategy"};
    const key = enMap[id] || id;
    return EN_MINI.missions[key] || EN_MINI.missions["default"];
  }
  const map = {
    A: {title:"âš¡ ì¶©ë™ Â· 5ë¶„ ëª°ì… ì‹œì‘", text:"íœ´ëŒ€í°ì„ ë‹¤ë¥¸ ë°©ì— ë‘ê³  íƒ€ì´ë¨¸ 5ë¶„ì„ ì„¤ì •í•˜ì„¸ìš”. í•œ ë¬¸ì œë§Œ ëê¹Œì§€ í‘¸ëŠ” ë° ì§‘ì¤‘í•´ë³´ì„¸ìš”."},
    D: {title:"ğŸŒ íšŒí”¼ Â· ì‹œì‘ ë§ˆì°° ì œê±°", text:"ì²« 5ë¶„ì— í’€ ë¬¸ì œ 3ê°œë¥¼ ë¯¸ë¦¬ í‘œì‹œí•´ë‘ì„¸ìš”. íƒ€ì´ë¨¸ 5ë¶„ ë™ì•ˆì€ ê·¸ ë¬¸ì œë§Œ ë¶™ì¡ì•„ë³´ì„¸ìš”."},
    B: {title:"ğŸŒŠ ë¶ˆì•ˆ Â· ê¸°ì¤€ ë‚®ì¶”ê³  ì™„ë£Œ", text:"ê°€ì¥ ì‰¬ìš´ ë¬¸ì œ 1ê°œë¥¼ ê³ ë¥´ì„¸ìš”. 5ë¶„ ë™ì•ˆì€ 'ì™„ë²½'ì´ ì•„ë‹ˆë¼ 'ëê¹Œì§€'ë§Œ ëª©í‘œë¡œ í•´ë³´ì„¸ìš”."},
    E: {title:"ğŸ§© ì „ëµ Â· ë‚´ ë§ë¡œ ë°”ê¾¸ê¸°", text:"ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© í•˜ë‚˜ë¥¼ ê³¨ë¼, êµê³¼ì„œë¥¼ ë®ê³  ë‚´ ë§ë¡œ 2ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•´ë³´ì„¸ìš”. ë§‰íˆëŠ” ë¶€ë¶„ì´ ì§„ì§œ ì•½ì ì´ì—ìš”."},
    C: {title:"ğŸ”¥ ë™ê¸° Â· ì„±ì·¨ê° ì í™”", text:"ê°€ì¥ ì§§ì€ ë‹¨ì› í•˜ë‚˜ë¥¼ ê³ ë¥´ê³ , 5ë¶„ ë™ì•ˆ 'ì•„ëŠ” ê²ƒ 3ê°€ì§€'ë¥¼ ì ì–´ë³´ì„¸ìš”."}
  };
  return map[id] || {title:"âœ… ê¸°ë³¸ Â· 5ë¶„ ì‹œì‘", text:"íƒ€ì´ë¨¸ 5ë¶„ì„ ì¼œê³ , ê°€ì¥ ì‰¬ìš´ ë¬¸ì œ 1ê°œë¥¼ ëê¹Œì§€ í’€ì–´ë³´ì„¸ìš”."};
}

function renderMissions(primaryId, secondaryId){
  const container = document.getElementById("missionBox");
  if(!container) return;

  const m1 = missionFor(primaryId);
  const m2 = (secondaryId && secondaryId !== primaryId)
    ? missionFor(secondaryId)
    : (lang==="en" ? EN_MINI.missions["supplement"] : {title:"âœ… ë³´ì™„ Â· 5ë¶„ ìœ ì§€", text:"íƒ€ì´ë¨¸ 5ë¶„ì„ ì¼œê³ , ë°©ê¸ˆ í‘¼ ë‚´ìš©ì„ ìŠ¤ìŠ¤ë¡œ 2ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•´ë³´ì„¸ìš”."});

  container.innerHTML = `
    <div class="card">
      <div class="h2">${M("missionTitle","ğŸ¯ ì˜¤ëŠ˜ì˜ 5ë¶„ ë¯¸ì…˜")} <span class="tiny" style="opacity:.7">${M("missionSub","Â· ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„ íƒ")}</span></div>
      <div class="sp12"></div>
      <div class="missionWrap">
        <div class="missionTitle">${M("missionPick","ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œ ì˜¤ëŠ˜ ë°”ë¡œ í•´ë³´ì„¸ìš”")}</div>
        <div class="missionGrid">
          <button class="missionCard selected" type="button" data-m="0">
            <div class="missionHead">${m1.title}</div>
            <div class="missionText">${m1.text}</div>
          </button>
          <button class="missionCard" type="button" data-m="1">
            <div class="missionHead">${m2.title}</div>
            <div class="missionText">${m2.text}</div>
          </button>
        </div>
        <div class="missionHint">${M("missionHint","âœ” 5ë¶„ë§Œ í•´ë„ ì‹¤í–‰ íë¦„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.")}</div>
      </div>
    </div>
  `;

  container.querySelectorAll(".missionCard").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      container.querySelectorAll(".missionCard").forEach(b=>b.classList.remove("selected"));
      btn.classList.add("selected");
    });
  });
}

</script>
</body>
</html>
